=== Diretórios (excluindo bin/ e obj/) ===
.
./TCUWatcher.API
./TCUWatcher.API/Controller
./TCUWatcher.API/Properties
./TCUWatcher.Application
./TCUWatcher.Application/Users
./TCUWatcher.Application/Users/DTOs
./TCUWatcher.Application/LiveEvents
./TCUWatcher.Application/LiveEvents/DTOs
./TCUWatcher.Infrastructure
./TCUWatcher.Infrastructure/Users
./TCUWatcher.Domain
./TCUWatcher.Domain/Repositories
./TCUWatcher.Domain/Services
./TCUWatcher.Domain/Entities

=== Arquivos de código e conteúdo ===

----- ./TCUWatcher.API/appsettings.json -----
    {
      "Logging": {
        "LogLevel": {
          "Default": "Information",
          "Microsoft.AspNetCore": "Warning"
        }
      },
      "AllowedHosts": "*"
    }

----- ./TCUWatcher.API/Controller/AuthController.cs -----
    using Microsoft.AspNetCore.Mvc;
    using TCUWatcher.Application.Users;
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.API.Controllers;
    
    [ApiController]
    [Route("api/[controller]")]
    public class AuthController : ControllerBase
    {
        private readonly IAuthenticationService _authenticationService;
        private readonly IUserService _userService;
    
        public AuthController(
            IAuthenticationService authenticationService,
            IUserService userService)
        {
            _authenticationService = authenticationService;
            _userService = userService;
        }
    
        // DTO de entrada para login
        public class LoginRequest
        {
            public string Email { get; set; } = default!;
            public string Password { get; set; } = default!;
        }
    
        // DTO de resposta ao cliente
        public class LoginResponse
        {
            public string Token { get; set; } = default!;
        }
    
        [HttpPost("login")]
        public async Task<IActionResult> Login([FromBody] LoginRequest request)
        {
            // 1) Validar se existe usuário (mockado)
            var userDto = await _userService.GetByEmailAsync(request.Email);
            if (userDto is null)
            {
                return Unauthorized(new { message = "Usuário não encontrado" });
            }
    
            // 2) Validar credenciais (sempre retorna true no mock)
            var valid = await _authenticationService.ValidateCredentialsAsync(request.Email, request.Password);
            if (!valid)
            {
                return Unauthorized(new { message = "Credenciais inválidas" });
            }
    
            // 3) Gerar “token” (mockado)
            var token = await _authenticationService.GenerateTokenAsync(userDto);
    
            return Ok(new LoginResponse { Token = token });
        }
    }

----- ./TCUWatcher.API/Controller/TestController.cs -----
    using Microsoft.AspNetCore.Mvc;
    using TCUWatcher.Application.Users;
    
    namespace TCUWatcher.API.Controllers;
    
    [ApiController]
    [Route("api/[controller]")]
    public class TestController : ControllerBase
    {
        private readonly ICurrentUserProvider _currentUserProvider;
    
        public TestController(ICurrentUserProvider currentUserProvider)
        {
            _currentUserProvider = currentUserProvider;
        }
    
        [HttpGet("me")]
        public async Task<IActionResult> GetCurrentUser()
        {
            var user = await _currentUserProvider.GetCurrentUserAsync();
            return Ok(user);
        }
    }
    // TCUWatcher.API.Controllers.TestController - Controller for testing user retrieval
    // This controller provides an endpoint to retrieve the current user information.
----- ./TCUWatcher.API/appsettings.Development.json -----
    {
      "Logging": {
        "LogLevel": {
          "Default": "Information",
          "Microsoft.AspNetCore": "Warning"
        }
      }
    }

----- ./TCUWatcher.API/Program.cs -----
    using TCUWatcher.Application.Users;
    using TCUWatcher.Infrastructure.Users;
    using TCUWatcher.Infrastructure.Users.Mock;
    using TCUWatcher.Application.Users.DTOs;
    using Microsoft.AspNetCore.Builder;
    using Microsoft.Extensions.DependencyInjection;
    using Microsoft.Extensions.Hosting;
    
    
    var builder = WebApplication.CreateBuilder(args);
    
    // 1. Adiciona serviços fundamentais
    builder.Services.AddControllers();
    
    // 2. Registrar o provedor de usuário “mockado” (sem autenticação real)
    builder.Services.AddSingleton<ICurrentUserProvider, MockUserProvider>();
    
    // 3. Registrar serviços de usuário/autenticação (aqui apontamos para mocks em Infrastructure)
    // Você deve criar, em TCUWatcher.Infrastructure, as classes:
    //
    //   public class MockUserService : IUserService { /* ... */ }
    //   public class MockAuthenticationService : IAuthenticationService { /* ... */ }
    //
    // Estas classes podem lançar NotImplementedException por enquanto ou retornar dados fixos.
    // No futuro, você substituirá pelos implementations reais.
    builder.Services.AddScoped<IUserService, MockUserService>();
    builder.Services.AddScoped<IAuthenticationService, MockAuthenticationService>();
    
    // 4. Configurar Swagger/OpenAPI
    builder.Services.AddEndpointsApiExplorer();
    builder.Services.AddSwaggerGen();
    
    var app = builder.Build();
    
    // 5. Pipeline de middlewares
    if (app.Environment.IsDevelopment())
    {
        app.UseSwagger();
        app.UseSwaggerUI();
    }
    
    app.UseHttpsRedirection();
    
    // (Eventualmente, quando implementar autenticação real, descomente estas linhas:)
    // app.UseAuthentication();
    // app.UseAuthorization();
    
    app.MapControllers();
    
    app.Run();

----- ./TCUWatcher.Application/Users/IAuthenticationService.cs -----
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.Application.Users;
    
    public interface IAuthenticationService
    {
        Task<string> GenerateTokenAsync(UserDto user);
        Task<bool> ValidateCredentialsAsync(string email, string password);
    }

----- ./TCUWatcher.Application/Users/DTOs/CreateUserDto.cs -----
    namespace TCUWatcher.Application.Users.DTOs;
    
    public class CreateUserDto
    {
        public string Name { get; set; } = default!;
        public string Email { get; set; } = default!;
        public string Password { get; set; } = default!;
    }

----- ./TCUWatcher.Application/Users/DTOs/UserDto.cs -----
    namespace TCUWatcher.Application.Users.DTOs;
    
    public class UserDto
    {
        public string Id { get; set; } = default!;
        public string Name { get; set; } = default!;
        public string Email { get; set; } = default!;
        public List<string> Roles { get; set; } = new();
    }

----- ./TCUWatcher.Application/Users/ICurrentUserProvider.cs -----
    namespace TCUWatcher.Application.Users;
    
    using TCUWatcher.Application.Users.DTOs;
    
    public interface ICurrentUserProvider
    {
        Task<UserDto?> GetCurrentUserAsync();
    }

----- ./TCUWatcher.Application/Users/IUserService.cs -----
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.Application.Users;
    
    public interface IUserService
    {
        Task<UserDto?> GetByEmailAsync(string email);
        Task CreateAsync(CreateUserDto user);
    }

----- ./TCUWatcher.Application/LiveEvents/LiveEventService.cs -----

----- ./TCUWatcher.Application/LiveEvents/DTOs/LiveEventDto.cs -----
    namespace TCUWatcher.Application.LiveEvents.DTOs;
    
    public class LiveEventDto
    {
        public string Id { get; set; } = default!;
        public string Title { get; set; } = default!;
        public string SourceType { get; set; } = default!; // ex: \"YouTube\" ou \"ManualUpload\"
        public string? SourceId { get; set; }
        public bool IsLive { get; set; }
        public DateTime? StartedAt { get; set; }
        public DateTime? EndedAt { get; set; }
    }

----- ./TCUWatcher.Application/LiveEvents/DTOs/CreateLiveEventDto.cs -----
    namespace TCUWatcher.Application.LiveEvents.DTOs;
    
    public class CreateLiveEventDto
    {
        public string Title { get; set; } = default!;
        public string SourceType { get; set; } = default!; // ex: \"YouTube\" ou \"ManualUpload\"
        public string? SourceId { get; set; }
        public DateTime? StartedAt { get; set; }
        public bool IsLive { get; set; }
    }

----- ./TCUWatcher.Application/LiveEvents/ILiveEventService.cs -----
    using TCUWatcher.Application.LiveEvents.DTOs;
    
    namespace TCUWatcher.Application.LiveEvents;
    
    public interface ILiveEventService
    {
        Task<IEnumerable<LiveEventDto>> GetAllAsync();
        Task<LiveEventDto?> GetByIdAsync(string id);
        Task<LiveEventDto> CreateAsync(CreateLiveEventDto input);
    }

----- ./TCUWatcher.Infrastructure/Users/MockUserProvider.cs -----
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using TCUWatcher.Application.Users;
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.Infrastructure.Users
    {
        public class MockUserProvider : ICurrentUserProvider
        {
            public Task<UserDto?> GetCurrentUserAsync()
            {
                var mockUser = new UserDto
                {
                    Id = "mock-user-001",
                    Name = "Auditor TCU",
                    Email = "auditor@tcu.gov.br",
                    Roles = new List<string> { "Admin" }
                };
    
                return Task.FromResult<UserDto?>(mockUser);
            }
        }
    }

----- ./TCUWatcher.Infrastructure/Users/MockAuthenticationService.cs -----
    TCUWatcher.Infrastructure/Users/MockAuthenticationService.cs
    using TCUWatcher.Application.Users;
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.Infrastructure.Users;
    
    public class MockAuthenticationService : IAuthenticationService
    {
        public Task<bool> ValidateCredentialsAsync(string email, string password)
            => Task.FromResult(true);
    
        public Task<string> GenerateTokenAsync(UserDto user)
            => Task.FromResult("mock-token-abc123");
    }
----- ./TCUWatcher.Infrastructure/Users/MockUserService.cs -----
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using TCUWatcher.Application.Users;
    using TCUWatcher.Application.Users.DTOs;
    
    namespace TCUWatcher.Infrastructure.Users
    {
        public class MockUserService : IUserService
        {
            public Task<UserDto?> GetByEmailAsync(string email)
                => Task.FromResult<UserDto?>(new UserDto {
                    Id = "mock-123",
                    Name = "Usuário Mock",
                    Email = email,
                    Roles = new List<string> { "User" }
                });
    
            public Task CreateAsync(CreateUserDto user)
                => Task.CompletedTask;
        }
    }

----- ./TCUWatcher.Domain/Repositories/ITranscriptSegmentRepository.cs -----
    using TCUWatcher.Domain.Entities;
    
    namespace TCUWatcher.Domain.Repositories;
    
    public interface ITranscriptSegmentRepository
    {
        Task<IEnumerable<TranscriptSegment>> GetByProcessIdAsync(string processId);
        Task AddAsync(TranscriptSegment segment);
        Task UpdateAsync(TranscriptSegment segment);
    }

----- ./TCUWatcher.Domain/Repositories/IUserRepository.cs -----
    using TCUWatcher.Domain.Entities;
    
    namespace TCUWatcher.Domain.Repositories;
    
    public interface IUserRepository
    {
        Task<User?> GetByIdAsync(string id);
        Task<User?> GetByEmailAsync(string email);
        Task AddAsync(User user);
        Task UpdateAsync(User user);
    }

----- ./TCUWatcher.Domain/Repositories/ILiveEventRepository.cs -----
    using TCUWatcher.Domain.Entities;
    
    namespace TCUWatcher.Domain.Repositories;
    
    public interface ILiveEventRepository
    {
        Task<LiveEvent?> GetByIdAsync(string id);
        Task<LiveEvent?> GetBySourceIdAsync(string sourceId);
        Task<IEnumerable<LiveEvent>> GetAllAsync();
        Task<IEnumerable<LiveEvent>> GetActiveAsync();
        Task AddAsync(LiveEvent liveEvent);
        Task UpdateAsync(LiveEvent liveEvent);
    }

----- ./TCUWatcher.Domain/Repositories/IJudgedProcessRepository.cs -----
    using TCUWatcher.Domain.Entities;
    
    namespace TCUWatcher.Domain.Repositories;
    
    public interface IJudgedProcessRepository
    {
        Task<IEnumerable<JudgedProcess>> GetByLiveEventIdAsync(string liveEventId);
        Task AddAsync(JudgedProcess process);
        Task UpdateAsync(JudgedProcess process);
    }

----- ./TCUWatcher.Domain/Services/IStorageService.cs -----
    namespace TCUWatcher.Domain.Services;
    
    public interface IStorageService
    {
        Task<string> SaveAsync(string key, Stream data);
        Task<Stream> ReadAsync(string key);
        Task DeleteAsync(string key);
    }

----- ./TCUWatcher.Domain/Services/IVideoDiscoveryService.cs -----
    namespace TCUWatcher.Domain.Services;
    
    public class DiscoveredVideo
    {
        public string Title { get; set; } = default!;
        public string VideoId { get; set; } = default!;
        public string Url { get; set; } = default!;
        public DateTime StartedAt { get; set; }
    }
    
    public interface IVideoDiscoveryService
    {
        Task<IEnumerable<DiscoveredVideo>> GetLiveEventsAsync();
    }

----- ./TCUWatcher.Domain/Entities/TranscriptSegment.cs -----
    namespace TCUWatcher.Domain.Entities;
    
    public class TranscriptSegment
    {
        public string Id { get; set; } = default!;
        public string LiveEventId { get; set; } = default!;
        public string? JudgedProcessId { get; set; }
        public TimeSpan StartTime { get; set; }
        public TimeSpan EndTime { get; set; }
        public string Text { get; set; } = default!;
        public string? Speaker { get; set; }
    }

----- ./TCUWatcher.Domain/Entities/EventSourceType.cs -----
    namespace TCUWatcher.Domain.Entities;
    
    public enum EventSourceType
    {
        YouTube,
        ManualUpload,
        Other
    }

----- ./TCUWatcher.Domain/Entities/LiveEvent.cs -----
    namespace TCUWatcher.Domain.Entities;
    
    public class LiveEvent
    {
        public string Id { get; set; } = default!;
        public string Title { get; set; } = default!;
        public EventSourceType SourceType { get; set; }
        public string? SourceId { get; set; }
        public string? Url { get; set; }
        public DateTime? StartedAt { get; set; }
        public DateTime? EndedAt { get; set; }
        public bool IsLive { get; set; }
        public string? UploadedByUserId { get; set; }
        public List<TranscriptSegment> Transcripts { get; set; } = new();
        public List<JudgedProcess> Processes { get; set; } = new();
        public bool IsManualUpload => SourceType == EventSourceType.ManualUpload;
    }

----- ./TCUWatcher.Domain/Entities/User.cs -----
    namespace TCUWatcher.Domain.Entities;
    
    public class User
    {
        public string Id { get; set; } = default!;
        public string Name { get; set; } = default!;
        public string Email { get; set; } = default!;
        public List<string> Roles { get; set; } = new();
    }

----- ./TCUWatcher.Domain/Entities/JudgedProcess.cs -----
    namespace TCUWatcher.Domain.Entities;
    
    public class JudgedProcess
    {
        public string Id { get; set; } = default!;
        public string LiveEventId { get; set; } = default!;
        public string CaseNumber { get; set; } = default!;
        public string? Title { get; set; }
        public string? Status { get; set; }
        public List<TranscriptSegment> TranscriptSegments { get; set; } = new();
    }
